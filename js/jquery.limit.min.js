(function(e){function t(t,n){var r=0;var i=0;e.each(t,function(e,t){r+=1;if(t.charCodeAt(0)==10&&n===true){r+=1}if(t.charCodeAt(0)==10&&n===false){i+=1}});return{counter:r,lines:i}}function n(t,n,r){e("#"+t).attr("maxlength",r+n)}e.fn.limit=function(r){var i=e.extend({chars:100,counter:"#result",backendValidation:true,warning:5},r);if(this.is("textarea, input")){this.attr("maxlength",i.chars)}this.on("keyup",function(r){var s=i.backendValidation;var o=e(this).val();var u=t(o,s);n(this.id,u.lines,i.chars);if(u.counter>i.chars){var a=u.counter-i.chars;o=o.slice(0,o.length-a);e(this).val(o);u=t(o,s);n(this.id,u.lines,i.chars)}e(i.counter).html(i.chars-u.counter);if(i.chars-u.counter<=i.warning){e(i.counter).addClass("warn")}else{e(i.counter).removeClass("warn")}});return this}})(jQuery)
